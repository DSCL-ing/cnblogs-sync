### å†…è§‚æ’åº/å†…çœæ’åº

>[å†…çœæ’åº - ç»´åŸºç™¾ç§‘ï¼Œè‡ªç”±çš„ç™¾ç§‘å…¨ä¹¦ (wikipedia.org)](https://zh.wikipedia.org/wiki/å†…çœæ’åº)
>
>å†…çœæ’åºï¼ˆè‹±è¯­ï¼šIntrosortï¼‰æ˜¯ç”±å¤§å«Â·ç©†å¡å°”åœ¨1997å¹´è®¾è®¡çš„æ’åºç®—æ³•ã€‚è¿™ä¸ªæ’åºç®—æ³•é¦–å…ˆä»å¿«é€Ÿæ’åºå¼€å§‹ï¼Œå½“é€’å½’æ·±åº¦è¶…è¿‡ä¸€å®šæ·±åº¦ï¼ˆæ·±åº¦ä¸ºæ’åºå…ƒç´ æ•°é‡çš„å¯¹æ•°å€¼ï¼‰åè½¬ä¸ºå †æ’åºã€‚é‡‡ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œå†…çœæ’åºæ—¢èƒ½åœ¨å¸¸è§„æ•°æ®é›†ä¸Šå®ç°å¿«é€Ÿæ’åºçš„é«˜æ€§èƒ½ï¼Œåˆèƒ½åœ¨æœ€åæƒ…å†µä¸‹ä»ä¿æŒğ‘‚(ğ‘›logâ¡ğ‘›)çš„æ—¶é—´å¤æ‚åº¦ã€‚ç”±äºè¿™ä¸¤ç§ç®—æ³•éƒ½å±äºæ¯”è¾ƒæ’åºç®—æ³•ï¼Œæ‰€ä»¥å†…çœæ’åºä¹Ÿæ˜¯ä¸€ä¸ªæ¯”è¾ƒæ’åºç®—æ³•ã€‚
>
>åœ¨å¿«é€Ÿæ’åºç®—æ³•ä¸­ï¼Œä¸€ä¸ªå…³é”®æ“ä½œå°±æ˜¯é€‰æ‹©åŸºå‡†ç‚¹ï¼ˆPivotï¼‰ï¼šå…ƒç´ å°†è¢«æ­¤åŸºå‡†ç‚¹åˆ†å¼€æˆä¸¤éƒ¨åˆ†ã€‚æœ€ç®€å•çš„åŸºå‡†ç‚¹å‡»æ‹©ç®—æ³•æ˜¯ä½¿ç”¨ç¬¬ä¸€ä¸ªæˆ–è€…æœ€åä¸€ä¸ªå…ƒç´ ï¼Œä½†è¿™åœ¨æ’åˆ—å·²éƒ¨åˆ†æœ‰åºçš„åºåˆ—ä¸Šæ€§èƒ½å¾ˆç³Ÿã€‚å°¼å…‹åŠ³æ–¯Â·ç»´å°”ç‰¹ä¸ºæ­¤è®¾è®¡äº†ä¸€ä¸ªå¿«é€Ÿæ’åºçš„å˜ä½“ï¼Œä½¿ç”¨å¤„äºä¸­é—´çš„å…ƒç´ æ¥é˜²æ­¢åœ¨æŸäº›ç‰¹æµ‹åºåˆ—ä¸Šæ€§èƒ½é€€åŒ–ä¸ºğ‘‚(ğ‘›2)çš„çŠ¶å†µã€‚è¿™ä¸ª3åŸºå‡†ä¸­ä½æ•°é€‰æ‹©ç®—æ³•ä»åºåˆ—çš„ç¬¬ä¸€ï¼Œä¸­é—´å’Œæœ€åä¸€ä¸ªå…ƒç´ è·å–ä¸­ä½æ•°æ¥ä½œä¸ºåŸºå‡†ï¼Œè™½ç„¶è¿™ä¸ªç®—æ³•åœ¨ç°å®ä¸–ç•Œçš„æ•°æ®ä¸Šæ€§èƒ½è¡¨ç°è‰¯å¥½ï¼Œä½†ç»è¿‡ç²¾å¿ƒè®¾è®¡çš„â€œç ´è§£åºåˆ—â€ä»èƒ½å¤§å¹…é™ä½æ­¤å˜ä½“ç®—æ³•çš„æ€§èƒ½ã€‚è¿™æ ·å°±æœ‰æ”»å‡»è€…ç²¾å¿ƒè®¾è®¡åºåˆ—å‘é€åˆ°å› ç‰¹ç½‘æœåŠ¡å™¨ä»¥è¿›è¡Œæ‹’ç»æœåŠ¡ï¼ˆDoSï¼‰æ”»å‡»çš„æ½œåœ¨å¯èƒ½æ€§ã€‚
>
>ç©†å¡å°”ç ”ç©¶æŒ‡å‡ºï¼Œåœ¨é’ˆå¯¹3åŸºå‡†ä¸­ä½æ•°é€‰æ‹©ç®—æ³•è®¾è®¡çš„100,000ä¸ªå…ƒç´ çš„â€œç ´è§£åºåˆ—â€ä¸Šï¼Œå†…çœæ’åºçš„è¿è¡Œæ—¶é—´æ˜¯è¿™ç§3åŸºå‡†å¿«é€Ÿæ’åºçš„1 / 200ã€‚åœ¨ç©†å¡å°”çš„ç®—æ³•ä¸­ï¼Œæœ€ç»ˆè¾ƒå°èŒƒå›´å†…æ•°æ®çš„æ’åºç”±ç½—ä¼¯ç‰¹Â·å¡å¥‡å¨å…‹æå‡ºçš„å°æ•°æ®æ’åºç®—æ³•å®Œæˆã€‚
>
>åœ¨2000å¹´6æœˆï¼ŒSGIçš„C++æ ‡å‡†æ¨¡æ¿åº“çš„stl_algo.h ï¼ˆé¡µé¢å­˜æ¡£å¤‡ä»½ï¼Œå­˜äºäº’è”ç½‘æ¡£æ¡ˆé¦†ï¼‰ä¸­çš„ä¸ç¨³å®šæ’åºç®—æ³•é‡‡ç”¨äº†ç©†å¡å°”çš„å†…çœæ’åºç®—æ³•ã€‚åœ¨æ­¤å®ç°ä¸­ï¼Œåˆ‡æ¢åˆ°æ’å…¥æ’åºçš„æ•°æ®é‡é˜ˆå€¼ä¸º16ä¸ªã€‚



>[å†…è§‚æ’åº_ç™¾åº¦ç™¾ç§‘ (baidu.com)](https://baike.baidu.com/item/å†…è§‚æ’åº/514510?fr=ge_ala)
>
>åœ¨å®è·µä¸­ï¼Œå¿«é€Ÿæ’åºçš„é€Ÿåº¦å¾ˆå¿«çš„ï¼Œä¸è¶³çš„åœ°æ–¹æ˜¯åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œé€Ÿåº¦ä¼šå¾ˆæ…¢ã€‚åŸå› æ˜¯åˆ‡åˆ†åŸç´ é€‰å–ä¸åˆç†ï¼Œä½¿å¾—åˆ‡åˆ†å‡ºæ¥çš„ä¸¤ä¸ªé—®é¢˜å¤§å°ä¸å¯¹ç§°ï¼Œå­é—®é¢˜å¤ªå¤šï¼Œæ·±åº¦å¤ªæ·±ã€‚ä¸€ä¸ªå¯è¡Œçš„æ”¹è¿›æ˜¯ï¼Œé€‰ä¸‰ä¸ªå…ƒç´ ï¼Œç„¶åå–ä¸­é—´çš„ä¸€ä¸ªä½œä¸ºåˆ‡åˆ†å…ƒç´ ï¼Œè¿™æ ·æ•ˆæœä¼šå¥½äº›ï¼Œä½†æ˜¯ä»ç„¶ä¼šæœ‰ä¸€äº›æç«¯çš„æƒ…å†µä¼šä½¿å¾—ç®—æ³•é€€åŒ–ä¸ºå¹³æ–¹ã€‚åªè¦è¿™ä¸‰ä¸ªå…ƒç´ æ˜¯å¯ä»¥é¢„è®¡çš„ï¼Œéƒ½èƒ½è®¾è®¡å‡ºè®©ç®—æ³•é€€åŒ–çš„è¾“å…¥ã€‚å¦ä¸€ä¸ªæ”¹è¿›æ–¹æ¡ˆæ˜¯ï¼Œé€‰ä¸€ä¸ªéšæœºæ•°ã€‚å‡è®¾éšæœºæ•°å‘ç”Ÿå™¨æ¯”è¾ƒéšæœºã€‚ä½†æ˜¯åªäº§ç”Ÿä¸€ä¸ªéšæœºæ•°ï¼Œåˆ‡åˆ†å‡ºæ¥çš„æ•ˆæœè¿˜æ˜¯ä¸ä¼šå¾ˆå¥½ï¼Œå¤šäº§ç”Ÿå‡ ä¸ªéšæœºæ•°ï¼Œå†é€‰ä¸­é—´æ•°ï¼Œæ•ˆæœä¼šå¥½äº›ï¼Œåªæ˜¯äº§ç”Ÿéšæœºæ•°çš„è¿‡ç¨‹æœ¬èº«å°±è€—æ—¶ï¼Œæ‰€ä»¥ä¸èƒ½äº§ç”Ÿå¤ªå¤šã€‚
>
>æœ‰äº›ç®—æ³•ä¸ç”¨éšæœºæ•°ï¼Œä¹Ÿèƒ½ç¡®ä¿ç®—æ³•ä¸ä¼šé€€åŒ–åˆ°å¹³æ–¹ã€‚ä½†æ˜¯åœ¨å®è·µä¸­ï¼Œè¿™äº›ç®—æ³•é€Ÿåº¦å¾ˆæ…¢ã€‚
>
>å†…è§‚æ’åºï¼Œå³æŠŠå¿«é€Ÿæ’åºè·Ÿå †æ’åºç»“åˆèµ·æ¥ã€‚å †æ’åºæ˜¯å¾ˆç¨³å®šçš„ï¼Œä¸ä¼šé€€åŒ–ï¼Œåªæ˜¯ä¸€èˆ¬æƒ…å†µä¸‹æ¯”è¾ƒæ…¢ã€‚åœ¨å¿«é€Ÿæ’åºtç®—æ³•å‡ºç°é€€åŒ–çš„æƒ…å†µä¸‹ï¼Œå†è°ƒç”¨å †æ’åºã€‚é—®é¢˜æ˜¯æ€ä¹ˆåˆ¤æ–­é€€åŒ–ã€‚ä¸€ç§ç®€å•çš„æ–¹æ¡ˆæ˜¯ï¼Œå½“æ·±åº¦è¶…è¿‡æŸå€¼çš„æ—¶å€™ï¼Œæ ¹æ®ç»éªŒï¼Œè¿™ä¸ªå€¼å¯ä»¥è®¾ä¸º2*lgNã€‚ç›´æ¥è°ƒç”¨å †æ’åºå¯¹åˆ‡åˆ†åçš„å­é—®é¢˜è¿›è¡Œæ’åºã€‚
>
>è¿™ä¸ªç®—æ³•åœ¨å¹³å‡æƒ…å†µä¸‹ï¼Œè·Ÿå¿«é€Ÿæ’åºå·®ä¸å¤šï¼Œåœ¨æœ€åæƒ…å†µä¸‹ï¼Œæ¯”å¿«é€Ÿæ’åºè¦å¿«ä¸€ä¸ªæ•°é‡çº§ã€‚



>
>
>C++ Standard Template Library (STL) ä¸­çš„ `std::sort` å‡½æ•°ä½¿ç”¨çš„æ’åºç®—æ³•æ˜¯ **Introspective Sort**ï¼ˆç®€ç§° introsort æˆ– intro sortï¼‰ï¼Œè¿™æ˜¯ä¸€ç§æ··åˆæ’åºç®—æ³•ã€‚Introsort ç»“åˆäº†å¿«é€Ÿæ’åºã€å †æ’åºå’Œæ’å…¥æ’åºçš„ç‰¹ç‚¹ï¼Œæ—¨åœ¨æä¾›è‰¯å¥½çš„å¹³å‡æ€§èƒ½å’Œæœ€åæƒ…å†µæ€§èƒ½ä¿è¯ã€‚
>
>### Introsort çš„å·¥ä½œåŸç†ï¼š
>
>1. **å¿«é€Ÿæ’åº**ï¼š
>
>  - Introsort å¼€å§‹æ—¶ä½¿ç”¨å¿«é€Ÿæ’åºç®—æ³•è¿›è¡Œæ’åºã€‚
>  - å¿«é€Ÿæ’åºå…·æœ‰å¾ˆå¥½çš„å¹³å‡æ€§èƒ½ï¼Œä½†æœ€åæƒ…å†µä¸‹æ€§èƒ½ä¼šé€€åŒ–è‡³ O(nÂ²)ã€‚
>
>2. **æ·±åº¦æ£€æµ‹ä¸åˆ‡æ¢åˆ°å †æ’åº**ï¼š
>
>  - ä¸ºäº†é¿å…å¿«é€Ÿæ’åºæœ€åæƒ…å†µçš„å‘ç”Ÿï¼ŒIntrosort ä¼šç›‘æ§é€’å½’çš„æ·±åº¦ã€‚
>  - å¦‚æœé€’å½’æ·±åº¦è¶…è¿‡äº†æŸä¸ªé˜ˆå€¼ï¼ˆé€šå¸¸æ˜¯ 2 * logâ‚‚(n)ï¼‰ï¼Œå®ƒä¼šåˆ‡æ¢åˆ°å †æ’åºã€‚
>  - å †æ’åºå…·æœ‰ O(n log n) çš„æœ€åæƒ…å†µæ€§èƒ½ï¼Œè¿™å¯ä»¥é˜²æ­¢æ€§èƒ½é€€åŒ–ã€‚
>
>3. **æ’å…¥æ’åº**ï¼š
>
>  - å¯¹äºå°æ•°ç»„ï¼ŒIntrosort å¯èƒ½ä¼šåˆ‡æ¢åˆ°æ’å…¥æ’åºã€‚
>  - æ’å…¥æ’åºå¯¹äºå°æ•°ç»„éå¸¸é«˜æ•ˆï¼Œé€šå¸¸å½“æ•°ç»„å¤§å°ä½äºæŸä¸ªé˜ˆå€¼æ—¶ä½¿ç”¨ã€‚
>
>### æ€»ç»“ï¼š
>
>- **ä¼˜ç‚¹**ï¼šIntrosort ç»“åˆäº†å¿«é€Ÿæ’åºçš„é«˜é€Ÿåº¦ä¸å †æ’åºçš„æœ€åæƒ…å†µæ€§èƒ½ä¿è¯ï¼ŒåŒæ—¶åˆ©ç”¨æ’å…¥æ’åºæ¥ä¼˜åŒ–å°æ•°ç»„çš„å¤„ç†ã€‚
>- **æ—¶é—´å¤æ‚åº¦**ï¼šå¹³å‡æƒ…å†µå’Œæœ€åæƒ…å†µçš„æ—¶é—´å¤æ‚åº¦å‡ä¸º O(n log n)ã€‚
>- **ç©ºé—´å¤æ‚åº¦**ï¼šç”±äºä½¿ç”¨é€’å½’ï¼ŒIntrosort çš„ç©ºé—´å¤æ‚åº¦ä¸º O(log n)ã€‚
>- **ç¨³å®šæ€§**ï¼šIntrosort ä¸æ˜¯ç¨³å®šçš„æ’åºç®—æ³•ï¼Œè¿™æ„å‘³ç€ç›¸ç­‰çš„å…ƒç´ ä¹‹é—´çš„ç›¸å¯¹é¡ºåºå¯èƒ½ä¸ä¼šè¢«ä¿ç•™ã€‚



```
#include <algorithm>
#include <vector>
#include <cassert>

// Partition function for quicksort
template<typename RandomAccessIterator, typename Compare>
RandomAccessIterator partition(RandomAccessIterator first, RandomAccessIterator last, Compare comp) {
    auto pivot = *last;
    auto i = first - 1;
    for (auto j = first; j != last; ++j) {
        if (comp(*j, pivot)) {
            ++i;
            std::swap(*i, *j);
        }
    }
    std::swap(*(i+1), *last);
    return i + 1;
}

// Introsort implementation
template<typename RandomAccessIterator, typename Compare>
void introsort(RandomAccessIterator first, RandomAccessIterator last, Compare comp, int depth_limit) {
    auto size = last - first;
    if (size < 16) {
        // Insertion sort for small subarrays
        std::sort(first, last, comp);
    } else if (depth_limit == 0) {
        // Switch to heapsort
        std::make_heap(first, last, comp);
        std::sort_heap(first, last, comp);
    } else {
        auto pivot = partition(first, last, comp);
        introsort(first, pivot, comp, depth_limit - 1);
        introsort(pivot + 1, last, comp, depth_limit - 1);
    }
}

// Wrapper function for introsort
template<typename RandomAccessIterator, typename Compare>
void introsort(RandomAccessIterator first, RandomAccessIterator last, Compare comp) {
    auto size = last - first;
    auto depth_limit = 2 * std::log(size);
    introsort(first, last, comp, depth_limit);
}

// Example usage
int main() {
    std::vector<int> vec = {5, 3, 8, 4, 2, 7, 1, 6};
    
    // Use introsort with default comparison
    introsort(vec.begin(), vec.end(), std::less<int>());
    
    // Check the sorted vector
    assert(std::is_sorted(vec.begin(), vec.end()));
    
    for (int num : vec) {
        std::cout << num << " ";
    }
    
    return 0;
}
```





#### å†…çœæ’åºä¸­çš„å †æ’åºä½œç”¨

>
>
>åœ¨ Introsortï¼ˆIntrospective Sortï¼‰ä¸­ä½¿ç”¨å †æ’åºçš„åŸå› ä¸»è¦æ˜¯ä¸ºäº†ç¡®ä¿æœ€åæƒ…å†µä¸‹çš„æ€§èƒ½ã€‚å¿«é€Ÿæ’åºåœ¨å¹³å‡æƒ…å†µä¸‹éå¸¸é«˜æ•ˆï¼Œä½†å®ƒçš„æœ€åæƒ…å†µæ€§èƒ½å¯ä»¥é€€åŒ–åˆ° O(nÂ²)ï¼Œè¿™é€šå¸¸å‘ç”Ÿåœ¨è¾“å…¥æ•°æ®å·²ç»éƒ¨åˆ†æ’åºæˆ–è€…é€‰æ‹©çš„æ¢è½´æ€»æ˜¯æœ€å·®çš„é€‰æ‹©æ—¶ã€‚ä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼ŒIntrosort åœ¨é€’å½’æ·±åº¦è¾¾åˆ°ä¸€å®šé˜ˆå€¼æ—¶åˆ‡æ¢åˆ°å †æ’åºï¼Œè¿™æ ·å³ä½¿åœ¨æœ€åæƒ…å†µä¸‹ä¹Ÿèƒ½ä¿è¯ O(n log n) çš„æ—¶é—´å¤æ‚åº¦ã€‚
>
>å †æ’åºçš„å¥½å¤„ï¼š
>
>1. **æœ€åæƒ…å†µæ€§èƒ½ä¿è¯**ï¼š
>
>  - å †æ’åºçš„æ—¶é—´å¤æ‚åº¦åœ¨æœ€åæƒ…å†µä¸‹ä¹Ÿæ˜¯ O(n log n)ï¼Œè¿™ä½¿å¾— Introsort å³ä½¿åœ¨å¤„ç†æœ€ä¸åˆ©çš„è¾“å…¥æ•°æ®æ—¶ä¹Ÿèƒ½ä¿æŒé«˜æ•ˆã€‚
>
>2. **ç®€å•æ€§**ï¼š
>
>  - å †æ’åºç®—æ³•ç›¸å¯¹ç®€å•ï¼Œæ˜“äºå®ç°ï¼Œå°¤å…¶æ˜¯åœ¨ C++ æ ‡å‡†åº“ä¸­å·²ç»æä¾›äº†ç°æˆçš„å‡½æ•°ï¼Œå¦‚ `std::make_heap` å’Œ `std::sort_heap`ã€‚
>
>3. **æ— éœ€é¢å¤–å­˜å‚¨ç©ºé—´**ï¼š
>
>  - å †æ’åºæ˜¯åŸåœ°æ’åºç®—æ³•ï¼Œé™¤äº†å‡ ä¸ªè¾…åŠ©å˜é‡å¤–ä¸éœ€è¦é¢å¤–çš„å­˜å‚¨ç©ºé—´ã€‚è¿™ä½¿å¾—å®ƒé€‚ç”¨äºå†…å­˜å—é™çš„ç¯å¢ƒã€‚
>
>4. **ç¨³å®šæ€§**ï¼š
>
>  - è™½ç„¶å †æ’åºæœ¬èº«ä¸æ˜¯ç¨³å®šçš„æ’åºç®—æ³•ï¼Œä½†åœ¨ Introsort çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œè¿™å¹¶ä¸æ˜¯ä¸€ä¸ªé—®é¢˜ï¼Œå› ä¸ºå¿«é€Ÿæ’åºæœ¬èº«ä¹Ÿä¸ç¨³å®šã€‚
>
>### åœ¨ Introsort ä¸­çš„å…·ä½“ä½œç”¨ï¼š
>
>1. **é¿å…å¿«é€Ÿæ’åºçš„æœ€åæƒ…å†µ**ï¼š
>
>  - é€šè¿‡ç›‘æµ‹å¿«é€Ÿæ’åºçš„é€’å½’æ·±åº¦ï¼Œä¸€æ—¦è¾¾åˆ°é¢„å®šçš„æœ€å¤§æ·±åº¦ï¼ŒIntrosort å°±ä¼šåˆ‡æ¢åˆ°å †æ’åºã€‚è¿™å¯ä»¥é˜²æ­¢å¿«é€Ÿæ’åºå› æœ€åæƒ…å†µè¾“å…¥è€Œå¯¼è‡´æ€§èƒ½æ€¥å‰§ä¸‹é™ã€‚
>
>2. **æä¾›æ€§èƒ½ä¿éšœ**ï¼š
>
>  - å †æ’åºçš„æœ€åæƒ…å†µæ€§èƒ½ä¿è¯ç¡®ä¿äº† Introsort åœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½ä¸ä¼šé€€åŒ–åˆ° O(nÂ²) çš„æ€§èƒ½ã€‚
>
>3. **é«˜æ•ˆå¤„ç†å‰©ä½™æ•°æ®**ï¼š
>
>  - é€šå¸¸åœ¨é€’å½’æ·±åº¦è¾¾åˆ°é˜ˆå€¼æ—¶ï¼Œå¿«é€Ÿæ’åºå·²ç»å®Œæˆäº†å¤§éƒ¨åˆ†æ’åºå·¥ä½œã€‚æ­¤æ—¶å †æ’åºåªéœ€è¦å¤„ç†å‰©ä½™çš„éƒ¨åˆ†æœªæ’åºæ•°æ®ï¼Œè¿™é€šå¸¸æ¯”ä»å¤´å¼€å§‹æ’åºæ•´ä¸ªæ•°ç»„è¦å¿«å¾—å¤šã€‚
>
>### å¦‚ä½•åœ¨ Introsort ä¸­ä½¿ç”¨å †æ’åºï¼š
>
>1. **è®¾ç½®æœ€å¤§é€’å½’æ·±åº¦**ï¼š
>
>  - é€šå¸¸è®¾ç½®ä¸º `2 * logâ‚‚(n)`ï¼Œå…¶ä¸­ `n` æ˜¯å¾…æ’åºæ•°ç»„çš„é•¿åº¦ã€‚
>
>2. **ç›‘æµ‹é€’å½’æ·±åº¦**ï¼š
>
>  - åœ¨é€’å½’è°ƒç”¨å¿«é€Ÿæ’åºçš„è¿‡ç¨‹ä¸­ï¼Œä¸æ–­æ›´æ–°é€’å½’æ·±åº¦è®¡æ•°å™¨ã€‚
>
>3. **åˆ‡æ¢åˆ°å †æ’åº**ï¼š
>
>  - ä¸€æ—¦é€’å½’æ·±åº¦è¾¾åˆ°æœ€å¤§å€¼ï¼Œå°±åœæ­¢ä½¿ç”¨å¿«é€Ÿæ’åºï¼Œå¹¶é€šè¿‡ä»¥ä¸‹æ­¥éª¤åº”ç”¨å †æ’åºï¼š
>    - ä½¿ç”¨ `std::make_heap` å°†æ•°ç»„è½¬æ¢æˆä¸€ä¸ªå¤§é¡¶å †æˆ–å°é¡¶å †ã€‚
>    - ä½¿ç”¨ `std::sort_heap` å®Œæˆæ’åºã€‚
>
>### ç¤ºä¾‹ä»£ç ä¸­çš„å †æ’åºéƒ¨åˆ†ï¼š
>
>```cpp
>if (depth_limit == 0) {
>   // Switch to heapsort
>   std::make_heap(first, last, comp);  // Convert the range into a heap
>   std::sort_heap(first, last, comp);  // Sort the heap in-place
>}
>```
>
>è¿™é‡Œï¼Œ`std::make_heap` åˆ›å»ºäº†ä¸€ä¸ªå¤§é¡¶å †ï¼Œè€Œ `std::sort_heap` åˆ™å¯¹å †è¿›è¡Œæ’åºï¼Œå¾—åˆ°æœ€ç»ˆçš„æœ‰åºæ•°ç»„ã€‚
>
>ç»¼ä¸Šæ‰€è¿°ï¼ŒIntrosort ä¸­ä½¿ç”¨å †æ’åºçš„ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†ç¡®ä¿åœ¨æœ€åæƒ…å†µä¸‹ä»èƒ½ä¿æŒ O(n log n) çš„æ—¶é—´å¤æ‚åº¦ï¼Œä»è€Œæä¾›å¯é çš„æ€§èƒ½ä¿è¯



#### å†…çœæ’åºä¸­æ’å…¥æ’åº(å°åŒºé—´ä¼˜åŒ–)éƒ¨åˆ†

>
>
>åœ¨ Introsortï¼ˆIntrospective Sortï¼‰ä¸­ä½¿ç”¨æ’å…¥æ’åºæ˜¯ä¸ºäº†ä¼˜åŒ–å°è§„æ¨¡æ•°ç»„çš„æ’åºè¿‡ç¨‹ã€‚æ’å…¥æ’åºæ˜¯ä¸€ç§ç®€å•çš„æ’åºç®—æ³•ï¼Œå®ƒåœ¨å¤„ç†å°æ•°ç»„æ—¶éå¸¸é«˜æ•ˆã€‚åœ¨ Introsort ä¸­ï¼Œå½“å­æ•°ç»„çš„å¤§å°å°äºä¸€ä¸ªé¢„å®šä¹‰çš„é˜ˆå€¼æ—¶ï¼Œå°±ä¼šä½¿ç”¨æ’å…¥æ’åºæ¥æ›¿ä»£å¿«é€Ÿæ’åºã€‚è¿™æ ·åšæœ‰å‡ ä¸ªå¥½å¤„ï¼š
>
>1. **å‡å°‘é€’å½’å¼€é”€**ï¼š
>   - å¯¹äºå°æ•°ç»„ï¼Œä½¿ç”¨æ’å…¥æ’åºå¯ä»¥å‡å°‘å¿«é€Ÿæ’åºçš„é€’å½’è°ƒç”¨æ¬¡æ•°ï¼Œä»è€Œé™ä½é€’å½’å¸¦æ¥çš„æ ˆç©ºé—´å ç”¨å’Œå‡½æ•°è°ƒç”¨å¼€é”€ã€‚
>2. **æé«˜æ•ˆç‡**ï¼š
>   - æ’å…¥æ’åºå¯¹äºå°æ•°ç»„æ¥è¯´æ˜¯éå¸¸é«˜æ•ˆçš„ï¼Œå°¤å…¶æ˜¯å½“æ•°ç»„å·²ç»éƒ¨åˆ†æ’åºæ—¶ã€‚å› æ­¤ï¼Œåœ¨ Introsort ä¸­ï¼Œå¯¹äºå°è§„æ¨¡å­æ•°ç»„ä½¿ç”¨æ’å…¥æ’åºå¯ä»¥æ˜¾è‘—æé«˜æ€§èƒ½ã€‚
>3. **ç®€åŒ–å®ç°**ï¼š
>   - æ’å…¥æ’åºçš„å®ç°éå¸¸ç®€å•ï¼Œä¸éœ€è¦å¤æ‚çš„é€»è¾‘æˆ–é¢å¤–çš„æ•°æ®ç»“æ„ï¼Œè¿™ä½¿å¾—å®ƒå¾ˆå®¹æ˜“é›†æˆåˆ° Introsort ä¸­ã€‚
>
>### æ’å…¥æ’åºçš„å·¥ä½œåŸç†ï¼š
>
>æ’å…¥æ’åºçš„åŸºæœ¬æ€æƒ³æ˜¯å°†æ•°ç»„åˆ†æˆå·²æ’åºéƒ¨åˆ†å’Œæœªæ’åºéƒ¨åˆ†ã€‚åˆå§‹æ—¶ï¼Œå·²æ’åºéƒ¨åˆ†åªæœ‰ä¸€ä¸ªå…ƒç´ ï¼ˆæ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼‰ã€‚ç®—æ³•éå†æœªæ’åºéƒ¨åˆ†ï¼Œå°†æ¯ä¸ªå…ƒç´ æ’å…¥åˆ°å·²æ’åºéƒ¨åˆ†çš„é€‚å½“ä½ç½®ï¼Œä»è€Œä½¿å·²æ’åºéƒ¨åˆ†å§‹ç»ˆä¿æŒæœ‰åºã€‚
>
>### Introsort ä¸­æ’å…¥æ’åºçš„ä½¿ç”¨ï¼š
>
>åœ¨ Introsort ä¸­ï¼Œæ’å…¥æ’åºé€šå¸¸ç”¨äºå¤„ç†å°è§„æ¨¡å­æ•°ç»„ã€‚å…·ä½“è€Œè¨€ï¼Œå½“å­æ•°ç»„çš„å¤§å°å°äºä¸€ä¸ªé¢„å®šä¹‰çš„é˜ˆå€¼æ—¶ï¼ŒIntrosort ä¼šä½¿ç”¨æ’å…¥æ’åºæ¥ä»£æ›¿å¿«é€Ÿæ’åºã€‚è¿™ä¸ªé˜ˆå€¼é€šå¸¸è®¾ç½®ä¸º 10 è‡³ 16 ä¹‹é—´ï¼Œå…·ä½“å€¼å¯ä»¥æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´ã€‚
>
>



#### å†…çœæ’åºç®—æ³•æ‰§è¡Œæµç¨‹

>1. **åˆå§‹åŒ–**ï¼š
>   - è®¾ç½®é€’å½’æ·±åº¦é™åˆ¶ `depth_limit`ï¼Œé€šå¸¸ä¸º `2 * logâ‚‚(n)`ï¼Œå…¶ä¸­ `n` æ˜¯å¾…æ’åºæ•°ç»„çš„é•¿åº¦ã€‚
>2. **å¿«é€Ÿæ’åº**ï¼š
>   - å¼€å§‹æ—¶ä½¿ç”¨å¿«é€Ÿæ’åºç®—æ³•å¯¹æ•°ç»„è¿›è¡Œæ’åºã€‚
>   - é€’å½’åœ°åº”ç”¨å¿«é€Ÿæ’åºï¼Œç›´åˆ°è¾¾åˆ°æŸä¸ªé€’å½’æ·±åº¦æˆ–å­æ•°ç»„å¤§å°æ¡ä»¶ã€‚
>3. **æ·±åº¦æ£€æµ‹ä¸åˆ‡æ¢åˆ°å †æ’åº**ï¼š
>   - å¦‚æœé€’å½’æ·±åº¦è¾¾åˆ° `depth_limit`ï¼Œåˆ™åœæ­¢ä½¿ç”¨å¿«é€Ÿæ’åºï¼Œè½¬è€Œä½¿ç”¨å †æ’åºã€‚
>   - è¿™æ˜¯ä¸ºäº†é˜²æ­¢å¿«é€Ÿæ’åºåœ¨æœ€åæƒ…å†µä¸‹æ€§èƒ½é€€åŒ–åˆ° O(nÂ²)ã€‚
>4. **å°æ•°ç»„ä½¿ç”¨æ’å…¥æ’åº**ï¼š
>   - å¦‚æœå­æ•°ç»„çš„å¤§å°å°äºæŸä¸ªé˜ˆå€¼ `threshold`ï¼ˆä¾‹å¦‚ 10 æˆ– 16ï¼‰ï¼Œåˆ™ä½¿ç”¨æ’å…¥æ’åºã€‚
>   - æ’å…¥æ’åºå¯¹äºå°æ•°ç»„éå¸¸é«˜æ•ˆã€‚
>
>### å†…çœæ’åºä¸­çš„ç®—æ³•åˆ‡æ¢æƒ…å†µ
>
>#### åˆå§‹é˜¶æ®µï¼šå¿«é€Ÿæ’åº
>
>- **ç®—æ³•**ï¼šå¿«é€Ÿæ’åº
>- **æ¡ä»¶**ï¼šé€’å½’å¼€å§‹æ—¶
>- **æè¿°**ï¼šå¿«é€Ÿæ’åºæ˜¯å†…çœæ’åºçš„ä¸»è¦æ’åºç®—æ³•ï¼Œå®ƒé€šè¿‡é€’å½’åœ°å°†æ•°ç»„åˆ†å‰²æˆè¾ƒå°çš„éƒ¨åˆ†æ¥è¿›è¡Œæ’åºã€‚
>
>#### å½“é€’å½’æ·±åº¦è¾¾åˆ°ä¸€å®šç¨‹åº¦ï¼šå †æ’åº
>
>- **ç®—æ³•**ï¼šå †æ’åº
>- **æ¡ä»¶**ï¼šé€’å½’æ·±åº¦è¾¾åˆ° `depth_limit`
>- **æè¿°**ï¼šä¸€æ—¦é€’å½’æ·±åº¦è¾¾åˆ° `depth_limit`ï¼Œå†…çœæ’åºå°†åœæ­¢ä½¿ç”¨å¿«é€Ÿæ’åºï¼Œå¹¶åˆ‡æ¢åˆ°å †æ’åºã€‚è¿™æ˜¯å› ä¸ºå †æ’åºå…·æœ‰ O(n log n) çš„æœ€åæƒ…å†µæ€§èƒ½ï¼Œå¯ä»¥é¿å…å¿«é€Ÿæ’åºæœ€åæƒ…å†µæ€§èƒ½é€€åŒ–çš„é—®é¢˜ã€‚
>
>#### å½“å…ƒç´ ä¸ªæ•°å°äºä¸€å®šç¨‹åº¦ï¼šæ’å…¥æ’åº
>
>- **ç®—æ³•**ï¼šæ’å…¥æ’åº
>- **æ¡ä»¶**ï¼šå­æ•°ç»„å¤§å°å°äº `threshold`
>- **æè¿°**ï¼šå½“å­æ•°ç»„å¤§å°å°äºé¢„å®šä¹‰çš„é˜ˆå€¼ `threshold` æ—¶ï¼Œå†…çœæ’åºå°†ä½¿ç”¨æ’å…¥æ’åºã€‚è¿™æ˜¯å› ä¸ºæ’å…¥æ’åºå¯¹äºå°æ•°ç»„éå¸¸é«˜æ•ˆï¼Œèƒ½å¤Ÿå‡å°‘é€’å½’è°ƒç”¨çš„å¼€é”€ï¼Œå¹¶ä¸”åœ¨å°æ•°ç»„ä¸Šé€šå¸¸æ¯”å¿«é€Ÿæ’åºæ›´å¿«ã€‚



#### å†…çœæ’åºä»€ä¹ˆæ—¶å€™ä½¿ç”¨æ’å…¥æ’åº,ä»€ä¹ˆæ—¶å€™ä½¿ç”¨å †æ’åº.

1. å½“åˆå§‹å¾…æ’åºæ•°ç»„å…ƒç´ ä¸ªæ•°å°äº10æˆ–16,åˆ™ç›´æ¥ä½¿ç”¨æ’å…¥æ’åº,è€Œä¸æ˜¯å¿«é€Ÿæ’åºã€‚è¿™æ˜¯å› ä¸ºæ’å…¥æ’åºå¯¹äºå°è§„æ¨¡æ•°ç»„éå¸¸é«˜æ•ˆï¼Œè€Œä¸”ä¸éœ€è¦é€’å½’è°ƒç”¨ï¼Œå¯ä»¥å‡å°‘é¢å¤–çš„å¼€é”€ã€‚
2. å¿«é€Ÿæ’åºåœ¨é€’å½’è¿‡ç¨‹æœªè¶…è¿‡(å¤§äºç­‰äº)æœ€å¤§é™åˆ¶å±‚æ•°,ä¸”å…ƒç´ ä¸ªæ•°å°äº10æˆ–16,ä¹Ÿç›´æ¥ä½¿ç”¨æ’å…¥æ’åº,å®Œæˆæœ€ç»ˆæ’åº.
3. åœ¨ä¸Šè¿°æ¡ä»¶éƒ½ä¸æ»¡è¶³çš„æƒ…å†µä¸‹(å…ƒç´ ä¸ªæ•°å¤§äº10æˆ–å¤§äº16çš„æƒ…å†µä¸‹),é€’å½’è¾¾åˆ°æœ€å¤§å±‚æ¬¡æ—¶,ä½¿ç”¨å †æ’åº.